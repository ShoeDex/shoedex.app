<!-- Generated by SpecStory -->

# 调整 hero section 高度 (2025-08-15 11:49Z)

_**User**_

hero section 的高度太高了，第一屏需要让卡片露出来一些

---

_**Assistant**_

我来检查当前的hero section设置，然后调整高度让卡片在第一屏中能露出来一些。

---

Read file: undefined

---

Read file: undefined

---

我看到hero section目前的高度设置是`height: 100vh`，这让它占满了整个视窗高度。为了让卡片在第一屏中能露出来一些，我需要调整hero section的高度。

---

Error parsing todo list data

---

## Todo List

- [-] 调整hero section高度从100vh减少到80vh，让卡片在第一屏露出
- [ ] 调整responsive设计确保移动端体验正常

---

<details><summary>Edit file: src/app/globals.css</summary>

undefined

**Chunk 1**
Lines added: 4, lines removed: undefined

```diff
@@ -33,4 +33,8 @@
    background-color: rgb(0, 0, 0);
  }
+ 
+ .hero {
+   height: 80vh;
+ }
  
  h1 {
```

</details>

---

现在我还需要调整hero section中现有的样式，因为后面有一个`.hero`选择器覆盖了一些属性。让我更新那个部分：

---

<details><summary>Edit file: src/app/globals.css</summary>

undefined

**Chunk 1**
Lines added: 2, lines removed: 1

```diff
@@ -138,10 +138,11 @@
  /* Hero section with 3D model */
  .hero {
+   height: 80vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
-   padding-bottom: calc(40vh - 100px);
+   padding-bottom: calc(20vh - 100px);
    width: 100%;
    max-width: 100%;
```

</details>

---

现在我还需要移除之前添加的重复的`.hero`规则：

---

<details><summary>Edit file: src/app/globals.css</summary>

undefined

**Chunk 1**
Lines added: undefined, lines removed: 4

```diff
@@ -33,8 +33,4 @@
    background-color: rgb(0, 0, 0);
  }
- 
- .hero {
-   height: 80vh;
- }
  
  h1 {
```

</details>

---

现在我需要更新移动端的响应式设计：

---

<details><summary>Edit file: src/app/globals.css</summary>

undefined

**Chunk 1**
Lines added: 2, lines removed: 1

```diff
@@ -194,5 +194,6 @@
  @media (max-width: 768px) {
    .hero {
-     padding-bottom: calc(40vh - 100px);
+     height: 75vh;
+     padding-bottom: calc(15vh - 80px);
    }
  
```

</details>

---

## Todo List

- [x] 调整hero section高度从100vh减少到80vh，让卡片在第一屏露出
- [x] 调整responsive设计确保移动端体验正常

---



---

完成！我已经成功调整了hero section的高度：

## 主要更改：

1. **桌面端调整**：
   - 将hero section高度从 `100vh` 减少到 `80vh`
   - 调整了 `padding-bottom` 从 `calc(40vh - 100px)` 到 `calc(20vh - 100px)`

2. **移动端调整**：
   - 移动端hero section高度设为 `75vh`
   - 调整移动端 `padding-bottom` 从 `calc(40vh - 100px)` 到 `calc(15vh - 80px)`

这样的调整确保了：
- 第一屏中会有约20%的空间（桌面端）或25%的空间（移动端）露出卡片部分
- 保持了良好的视觉平衡和用户体验
- 移动端有更紧凑的布局以适应较小的屏幕

现在当用户访问页面时，他们可以在第一屏就看到卡片的一部分，这会暗示用户向下滚动查看更多内容。

---

_**User**_

按照 Image 所示我的思路是：
1. cards section 的容器在 hero section 的上面的，所以每个 section 应该都是透明的，然后整个 body 应该是一个 #00000 的颜色
2. 往下滚动时，hero section 的内容应该向上移动，cards 的内容也向上移动。当 hero section 的内容移出 viewport 后，cards 的内容应该移动到了 viewport 中间的位置，接着，继续滚动，cards 的滚动动画开始执行

---

_**Assistant**_

我理解你的设计思路！你想要实现一个分层滚动效果，其中cards section在视觉上叠加在hero section之上，但都是透明背景。让我来重新构建这个布局结构。

---

## Todo List

- [-] 重新设计布局结构：body设为黑色背景，所有section设为透明
- [ ] 调整cards section定位，使其在hero section上方
- [ ] 实现分层滚动效果：hero内容和cards内容同时向上移动
- [ ] 调整GSAP动画逻辑以配合新的滚动行为

---

Read file: undefined

---

现在我来重新设计布局结构，实现你描述的分层滚动效果：

---

<details><summary>Edit file: src/app/globals.css</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -13,4 +13,5 @@
    font-family: var(--font-inter), system-ui, -apple-system, sans-serif;
    overflow-x: hidden;
+   background-color: #000000;
  }
  
```

</details>

---

<details><summary>Edit file: src/app/globals.css</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -32,5 +32,5 @@
    width: 100%;
    height: 100vh;
-   background-color: rgb(0, 0, 0);
+   background-color: transparent;
  }
  
```

</details>

---

现在我需要重新设计布局结构，让cards section在hero section上方：

---

<details><summary>Edit file: src/app/globals.css</summary>

undefined

**Chunk 1**
Lines added: 14, lines removed: 4

```diff
@@ -135,13 +135,23 @@
  /* Hero section with 3D model */
  .hero {
+   position: fixed;
+   top: 0;
+   left: 0;
+   width: 100%;
+   height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
-   padding-bottom: calc(40vh - 100px);
-   width: 100%;
-   max-width: 100%;
-   overflow-x: hidden;
+   z-index: 1;
+ }
+ 
+ /* Cards section - positioned above hero */
+ .cards {
+   position: relative;
+   z-index: 2;
+   margin-top: 100vh;
+   height: 100vh;
  }
  
```

</details>

---

<details><summary>Edit file: src/app/globals.css</summary>

undefined

**Chunk 1**
Lines added: 7, lines removed: 3

```diff
@@ -200,10 +200,14 @@
    cursor: grabbing;
  }
+ 
+ /* Footer section */
+ .footer {
+   position: relative;
+   z-index: 2;
+   height: 100vh;
+ }
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
-   .hero {
-     padding-bottom: calc(40vh - 100px);
-   }
  
    .shoe-model-container {
```

</details>

---

## Todo List

- [x] 重新设计布局结构：body设为黑色背景，所有section设为透明
- [x] 调整cards section定位，使其在hero section上方
- [ ] 实现分层滚动效果：hero内容和cards内容同时向上移动
- [ ] 调整GSAP动画逻辑以配合新的滚动行为

---

现在我需要调整GSAP的滚动动画逻辑来实现分层滚动效果：

---

## Todo List

- [x] 重新设计布局结构：body设为黑色背景，所有section设为透明
- [x] 调整cards section定位，使其在hero section上方
- [-] 实现分层滚动效果：hero内容和cards内容同时向上移动
- [ ] 调整GSAP动画逻辑以配合新的滚动行为

---

Read file: undefined

---

现在我需要重写GSAP动画逻辑来实现分层滚动效果：

---

<details><summary>Edit file: src/app/page.js</summary>

undefined

**Chunk 1**
Lines added: 46, lines removed: 1

```diff
@@ -13,14 +13,59 @@
  export default function Home() {
    const container = useRef(null);
+   const heroRef = useRef(null);
    const cardRefs = useRef([]);
  
    useGSAP(
      () => {
        const cards = cardRefs.current;
+       const hero = heroRef.current;
        const totalScrollHeight = window.innerHeight * 1.4;
        const positions = [15, 36, 60, 85];
        const rotations = [-8, -8, 4, 10];
  
-       // pin cards section
+       // Hero section向上移动动画
+       gsap.to(hero, {
+         y: -window.innerHeight,
+         ease: "none",
+         scrollTrigger: {
+           trigger: container.current.querySelector(".cards"),
+           start: "top bottom",
+           end: "top top",
+           scrub: true,
+           id: "hero-move-up",
+         },
+       });
+ 
+       // 卡片初始位置设置在视窗下方，随滚动移动到中心
+       cards.forEach((card, index) => {
+         const frontEl = card.querySelector(".flip-card-front");
+         const backEl = card.querySelector(".flip-card-back");
+ 
+         // 初始状态：卡片在视窗下方，摊开状态，显示背面文字
+         gsap.set(card, {
+           left: `${positions[index]}%`,
+           rotation: rotations[index],
+           y: window.innerHeight * 0.3, // 初始位置在下方
+         });
+         gsap.set(frontEl, { rotateY: -180 });
+         gsap.set(backEl, { rotateY: 0 });
+       });
+ 
+       // 第一阶段：卡片移动到视窗中心
+       cards.forEach((card, index) => {
+         gsap.to(card, {
+           y: 0,
+           ease: "none",
+           scrollTrigger: {
+             trigger: container.current.querySelector(".cards"),
+             start: "top bottom",
+             end: "top top",
+             scrub: true,
+             id: `card-move-to-center-${index}`,
+           },
+         });
+       });
+ 
+       // 第二阶段：pin cards section并执行卡片动画
        ScrollTrigger.create({
          trigger: container.current.querySelector(".cards"),
```

**Chunk 2**
Lines added: 1, lines removed: 15

```diff
@@ -32,19 +77,5 @@
        });
  
-       // 设置初始为摊开状态并显示文字面（backText）
-       cards.forEach((card, index) => {
-         const frontEl = card.querySelector(".flip-card-front");
-         const backEl = card.querySelector(".flip-card-back");
- 
-         // 初始：摊开 + 显示 back（文字面）
-         gsap.set(card, {
-           left: `${positions[index]}%`,
-           rotation: rotations[index],
-         });
-         gsap.set(frontEl, { rotateY: -180 });
-         gsap.set(backEl, { rotateY: 0 });
-       });
- 
-       // 滚动前段：由摊开过渡到中心堆叠（位置与旋转对调）
+       // 第二阶段：卡片收拢到中心堆叠
        cards.forEach((card, index) => {
          gsap.to(card, {
```

**Chunk 3**
Lines added: 1, lines removed: 1

```diff
@@ -62,5 +93,5 @@
        });
  
-       // 翻转在收拢到中心的过程中同步进行，收拢结束时翻转完成
+       // 第二阶段：卡片翻转动画
        cards.forEach((card, index) => {
          const frontEl = card.querySelector(".flip-card-front");
```

**Chunk 4**
Lines added: 5, lines removed: 6

```diff
@@ -71,14 +102,13 @@
            start: "top top",
            end: () => `+=${window.innerHeight}`,
-           scrub: 0.,
+           scrub: 0,
            id: `flip-during-stack-${index}`,
            onUpdate: (self) => {
-             // 提前一些开始翻转，并按索引错开时间
-             const globalAdvance = 0.2; // 全局提前量
-             const perCardStagger = 0.1; // 每张卡错开量
+             const globalAdvance = 0.2;
+             const perCardStagger = 0.1;
              const progressWithLeadAndStagger = self.progress + globalAdvance - index * perCardStagger;
              const t = Math.min(1, Math.max(0, progressWithLeadAndStagger));
-             const frontRotation = -180 + 180 * t; // -180 -> 0
-             const backRotation = 0 + 180 * t; // 0 -> 180
+             const frontRotation = -180 + 180 * t;
+             const backRotation = 0 + 180 * t;
              gsap.set(frontEl, { rotateY: frontRotation });
              gsap.set(backEl, { rotateY: backRotation });
```

</details>

---

现在我需要在JSX中添加heroRef：

---

<details><summary>Edit file: src/app/page.js</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -130,5 +130,5 @@
        <ReactLenis root options={{ lerp: 0.16 }}>
          <div className="container" ref={container}>
-           <section className="hero">
+           <section className="hero" ref={heroRef}>
              <ShoeModel />
              <h1>
```

</details>

---

## Todo List

- [x] 重新设计布局结构：body设为黑色背景，所有section设为透明
- [x] 调整cards section定位，使其在hero section上方
- [x] 实现分层滚动效果：hero内容和cards内容同时向上移动
- [x] 调整GSAP动画逻辑以配合新的滚动行为

---



---

完美！我已经成功实现了你所描述的分层滚动效果。让我总结一下所做的主要更改：

## 主要更改总结：

### 1. **布局结构重新设计**
- **body背景**：设置为 `#000000` 黑色背景
- **所有sections**：背景设为透明 (`transparent`)
- **Hero section**：使用 `position: fixed` 固定在视窗中
- **Cards section**：使用 `position: relative` 和 `z-index: 2`，位于hero上方

### 2. **分层滚动逻辑**
- **第一阶段**：当用户开始滚动时
  - Hero内容向上移动 (`y: -window.innerHeight`)
  - Cards从视窗下方移动到中心位置 (`y: 0`)
  - 两者同步移动，实现分层效果

- **第二阶段**：当cards到达视窗顶部时
  - Cards section被pin住
  - 执行原有的卡片动画（摊开→堆叠→翻转）

### 3. **动画时序**
- **触发点**：`"top bottom"` 到 `"top top"` - 当cards section进入视窗时开始
- **同步移动**：Hero向上消失的同时，cards向上移动到中心
- **平滑过渡**：当hero完全移出视窗后，cards正好到达中心位置开始执行卡片动画

### 4. **视觉效果**
按照你图片中的设计：
- 黑色背景贯穿整个页面
- Hero和cards都有透明背景，形成分层效果
- 滚动时hero内容优雅地向上移出，cards内容同时进入
- 当cards到达中心后，开始执行精彩的卡片翻转和堆叠动画

这个实现完全符合你的设计理念：创建一个流畅的分层滚动体验，其中hero和cards内容协调移动，直到cards占据中心舞台并开始其动画表演。

---

